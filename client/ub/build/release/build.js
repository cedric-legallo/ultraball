var zipFs=new zip.fs.FS;function onerror(a){console.error(a)}
function unzipBlob(a){zipFs.importBlob(a,function(){for(var b=zipFs.root.getChildByName("import"),a,c,e,f,g=b.children.length-1;g>=0;g--)b.children[g].name=="game.xml"&&(a=b.children[g]),b.children[g].name=="logo1.jpg"&&(c=b.children[g]),b.children[g].name=="logo2.jpg"&&(e=b.children[g]),b.children[g].name=="field.jpg"&&(f=b.children[g]);a.getText(function(b){logText(b);b=[];c&&b.push({img:c,callback:setLogoHome});e&&b.push({img:e,callback:setLogoAway});f&&b.push({img:f,callback:setField});loadUnzippedimages(b)})},
null,onerror)}function loadUnzippedimages(a){if(a.length){var b=a.pop();b.img.getData64URI("image/jpg",function(d){b.callback.apply(window,[d]);loadUnzippedimages(a)})}else onFinished()}function logText(a){setGameDatas(a)}function setLogoHome(a){document.getElementById("logoHome").src=a}function setLogoAway(a){document.getElementById("logoAway").src=a}function setField(a){document.getElementById("field").src=a}zip.workerScriptsPath="zip/";
function loadMatch(){showLoader();if(window.File&&window.FileReader&&window.FileList&&window.Blob){var a=document.getElementById("matchLoader").files[0],b=function(b){unzipBlob(b,function(b){logText(b)})};zipFs.root.addDirectory("import").importBlob(a,function(){zipFs.exportBlob(b,null,onerror)})}else console.warn("The File APIs are not fully supported in this browser."),a=document.forms.fileForm,a.dateFile.value=(new Date).getTime(),a.submit()}
function onIframeLoad(){console.log(1);var a=document.forms.fileForm.dateFile.value;if(a){document.getElementById("scr").src="http://localhost:3000/getMatch?id="+a;var b=setInterval(function(){returnedValue&&(clearInterval(b),setGameDatas(returnedValue),onFinished())},300)}}function onFinished(){document.getElementById("loadButton").className="hidden";document.getElementById("buttons").className="";hideLoader()};var comments_fr={ControlLife0:"%1 est trop ab\u00eem\u00e9 pour jouer le match",ControlTransplant0:"%1 poss\u00e8de des greffes interdites",MoveToCase1:"%1 bondit vers la case %2",MoveToCase2:"%1 h\u00e9site, mais finalement se d\u00e9cide \u00e0 aller en %2",MoveToCase3:"%1 se positionne en case %2",MoveToBallOwner1:"%1 se rue vers le porteur de la balle en %2, \u00e7a va faire mal !",MoveToBallOwner2:"%1 s'avance avec d\u00e9termination vers le porteur de la balle en %2",MoveToBallOwner3:"%1 a vu la balle, et il charge le porteur de la balle en %2",
MoveToPlayer1:"%1 se d\u00e9place vers %2 en %3. Ca va cogner !",MoveToPlayer2:"%1 adresse un regard noir \u00e0 %2 pendant qu'il se d\u00e9place en case %3",MoveToPlayer3:"Pas de r\u00e9pit pour %2, %1 l'a pris pour cible en allant en case %3",MoveToBall1:"%1 profite que la balle est \u00e0 terre et s'\u00e9lance vers la balle en %2",MoveToBall2:"L'occasion est trop belle pour %1 qui fonce en %2, vers la balle au sol",MoveToBall3:"%1 va en %2 dans l'espoir de ramasser la balle",BlockedMove1:"%1 est bloqu\u00e9",
BlockedMove2:"%1 tente vainement de se sortir du blocage, il reste sur sa case ce tour-ci",BlockedMove3:"%1 est immobilis\u00e9 par un adversaire",DontKnowMove1:"%1 ne sait visiblement pas quoi faire et ne se d\u00e9place pas",DontKnowMove2:"%1 attend vainement un ordre de son coach et reste sur place",DontKnowMove3:"%1 reste l\u00e0 sans rien faire comme si il \u00e9tait fig\u00e9",StandUp1:"%1 grimace tandis qu'il se rel\u00e8ve",StandUp2:"%1 bondit sur ses pieds",StandUp3:"%1 effectue une roulade et se retrouve debout",
Wait1:"%1, sur ses appuis, attend",Wait2:"%1 observe ses adversaires et reste immobile",Wait3:"%1 observe un oiseau voler",DontKnowBall1:"%1 se demande \u00e0 quoi peu bien servir cette boule m\u00e9tallique !",DontKnowBall2:"%1 regarde ses co\u00e9quipiers et h\u00e9site sur la marche \u00e0 suivre",DontKnowBall3:"%1 jette un regard interrogatif \u00e0 son coach et \u00e0 la balle...",KeepBall1:"%1 conserve la balle en attendant une meilleure situation",KeepBall2:"%1 semble savoir ce qu'il fait en gardant la balle",
KeepBall3:"%1 jongle avec la balle entre ses mains",TakeBall1:"%1 plonge et ramasse la balle",TakeBall2:"%1 s'empare de la balle",TakeBall3:"D'un geste rapide %1 attrape la balle",PassPlayerSuccess1:"%1 fait une passe millim\u00e9tr\u00e9e \u00e0 %2",PassPlayerSuccess2:"%1 envoie la balle \u00e0 %2. Quelle passe !",PassPlayerSuccess3:"%1 a vu %2 et lui fait une passe",PassPlayerReceived1:"%1 effectue une passe \u00e0 %2 mais c'est %3 qui la rattrape",PassPlayerReceived2:"%1 passe \u00e0 %2, mais c'est %3 qui se trouve sur la trajectoire et se saisit de la balle",
PassPlayerReceived3:"Mais qu'a donc essay\u00e9 %1 ? C'est %3 qui attrape la balle alors qu'elle semblait destin\u00e9e \u00e0 %2",PassPlayerFailure1:"%1 tente une passe \u00e0 %2, mais c'est rat\u00e9 :\" la balle balle atterrit en %3",PassPlayerFailure2:"Mais o\u00f9 %1 regardait-il ? au lieu d'atteindre %2, il envoie lamentablement la balle mourir en case %3 !",PassPlayerFailure3:"%1 a le bras qui tremble ! %2 n'a qu'\u00e0 regarder la balle atterrir en %3",PassPlayerIntercepted1:"%1 tente une passe \u00e0 %2, mais %3 est sur la trajectoire et intercepte la balle !",
PassPlayerIntercepted2:"%1 cherche \u00e0 envoyer la balle \u00e0 %2, mais %3, \u00e0 l'aff\u00fbt, s'en empare !  ",PassPlayerIntercepted3:"Bon r\u00e9flexe de %3 qui intercepte la balle de %1 destin\u00e9e \u00e0 %2",PassSquareCatched1:"%1 envoie la balle en case %2 et %3 l'attrape",PassSquareCatched2:"%1 fait une magnifique passe vers %2 et %3 se saisit de la balle",PassSquareCatched3:"%1 envoie la balle en case %2 et %3 n'a plus qu'a tendre les bras pour l'attraper",PassSquareIntercepted1:"%1 envoie la balle en case %2 mais %3 l'intercepte !",
PassSquareIntercepted2:"Mais qu'avait %1 dans la t\u00eate en envoyant en case %2 ? Il \u00e9tait \u00e9vident que %3 \u00e9tait en position id\u00e9ale pour r\u00e9cup\u00e9rer !",PassSquareIntercepted3:"%1 envoie la balle vers la case %2, mais %3, suspendu en l'air, l'intercepte !",PassSquareSuccess1:"%1 a la balle, il l'envoie en %2 mais personne n'est l\u00e0 pour l'attraper !",PassSquareSuccess2:"%1 a effectu\u00e9 une bonne passe... dommage, personne n'est \u00e0 la r\u00e9ception en %2",PassSquareSuccess3:"%1 lance la balle... tous les joueurs la suivent des yeux jusqu'en case %2 o\u00f9 elle roule librement",
PassSquareFailure1:"%1 envoie la balle en case %2 mais le vent la fait atterrir en %3 !",PassSquareFailure2:"Non seulement %1 ne trouve pas ses co-\u00e9quipiers en case %3, mais en plus il semble qu'il cherchait \u00e0 envoyer en case %2. D\u00e9cid\u00e9ment il va falloir qu'il travaille ses passes !",PassSquareFailure3:"%1 jette la balle vers la case %2 mais la balle semble \u00eatre attir\u00e9e en %3 ! Magie noire ou technologie ?",ShootSuccess1:"%1 d\u00e9tend son bras pour effectuer un tir \u00e0 %2 points et marque !",
ShootSuccess2:"%1 frappe pour %2 points et inscrit un bien joli but !",ShootSuccess3:"Oui oui, %1 h\u00e9site, puis il ajuste un tir et GOOOOOOAAAALLL !!! %2 points pour son \u00e9quipe sur ce terrible tir qui cl\u00f4ture le quart-temps",ShootIntercepted1:"%1 shoote mais %2 effectue un arr\u00eat de grande classe !",ShootIntercepted2:" Le tir de %1 \u00e9tait parfait, mais c'est %2 qui a le dernier mot sur cette phase et va pouvoir relancer le jeu",ShootIntercepted3:"%1 tire sans conviction et %2 intercepte sans difficult\u00e9 la balle",
ShootFailure1:"%1 tire et regarde la balle atterrir lamentablement en case %2",ShootFailure2:"%1 manque le but et la balle retombe mollement en case %2",ShootFailure3:"%1 est en bonne position mais le tir est trop rel\u00e2ch\u00e9. Le panneau r\u00e9sonne sur ce tir puissant et la balle termine sa course en case %2",SmashSuccess1:"%1 d\u00e9tend sa grande carcasse pour marquer un magnifique smash \u00e0 %2 points !",SmashSuccess2:"%1 s'envole dans les airs avant d'\u00e9craser la balle dans le but adverse pour marquer %2 points",
SmashSuccess3:"Mais que fait %1 ? Il effectue un splendide salto arri\u00e8re avant de marquer un but splendide !",SmashFailure1:"%1 essaie vainement de smasher, mais sa balle heurte le mur et retombe en %2",SmashFailure2:"%1 s'\u00e9lance pour smasher, mais tout \u00e0 sa joie de marquer un joli but, il en oublie de s'appliquer... et manque le but. La balle retombe en %2",SmashFailure3:"Mais qu'a bien pu s'imaginer %1 ? Son smash est bien entendu loup\u00e9 et la balle rebondit en %2",plaquageSuccess1:"%1 plaque %2 qui s'\u00e9crase au sol",
plaquageSuccess2:"A\u00efe, ce placage de %1 sur %2 a du faire bien mal",plaquageSuccess3:"%2 grimace en heurtant le sol sur ce superbe placage de %1",plaquageBallSuccess1:"Bien d\u00e9cid\u00e9, %1 effectue un plaquage sur %2 qui se retrouve par terre, la balle \u00e0 ses c\u00f4t\u00e9s",plaquageBallSuccess2:"%1 se jette sur %2 et marque un magnifique Sack pour son \u00e9quipe",plaquageBallSuccess3:"%1 va pouvoir revoir toute la semaine sur son holovison son magnifique placage sur %2",plaquageFailure1:"%1 essaie de plaquer %2, mais celui-ci l'esquive ais\u00e9ment",
plaquageFailure2:"%1 manque son plaquage sur %2 et s'effondre \u00e0 ses pieds",plaquageFailure3:"%2 fait un pas de c\u00f4t\u00e9 alors que %1 plane \u00e0 sa rencontre et atterrit t\u00eate la pemi\u00e8re sur le sol",hitSuccess1:"%1 frappe sauvagement %2, qui pisse le sang !",hitSuccess2:"%1 aplatit son poing sur la figure de %2",hitSuccess3:"%1 cherche \u00e0 arracher la m\u00e2choire de %2 !",hitBallSuccess1:"Nooon, %2 l\u00e2che la balle alors que %1 lui ass\u00e8ne un coup de poing magistral qui fait trembler le stade",
hitBallSuccess2:"Quel coup de poing maginfique de %1 ! %2 semble sonn\u00e9, il l\u00e2che la balle!!",hitBallSuccess3:"%1 a frapp\u00e9 si fort que %2 ne peut faire autrement que de l\u00e2cher la balle",hitFailure1:"%1 donne un coup de poing \u00e0 %2 qui l'a esquiv\u00e9 sans difficult\u00e9",hitFailure2:"%2 ne peut retenir un sourire alors que son adversaire essaie vainement de le frapper",hitFailure3:"Que fait %1 ? Il chasse les mouches? Ah non! Il manque son coup de poing sur %2 !!",sweepSuccess1:"%1 effectue un splendide balayage sur %2 qui s'\u00e9crase au sol comme une merde",
sweepSuccess2:"Le public gronde apr\u00e8s ce balayage de %1 sur %2... il veut du sang !",sweepSuccess3:"%2 a d\u00fb se d\u00e9bo\u00eeter l'\u00e9paule en tombant suite au balayage que vient d'effectuer %1",sweepBallSuccess1:"Gr\u00e0ce \u00e0 un magnifique balayage, %1 fait chuter %2 qui l\u00e2che la balle sur le coup",sweepBallSuccess2:"Mais pourquoi %2 n'a t'il pas essay\u00e9 d'esquiver le balayage de %1 ? Suite \u00e0 \u00e7a, il se retrouve au sol et l\u00e2che la balle",sweepBallSuccess3:"Alors qu'habituellement il plaque ses adversaires, %1 a d\u00e9cid\u00e9 qu'un balayage \u00e9tait plus esth\u00e9tique et %2 chute et l\u00e2che la balle sur le coup",
sweepFailure1:"%1 essaie de faire un balayage sur %2, mais celui-ci, plus prompt l'esquive ais\u00e9ment",sweepFailure2:"%1 rate lamentablement son balayage sur %2 et reste b\u00e9at devant son adversaire",sweepFailure3:"%2 bloque ais\u00e9ment le pied de %1 qui tentait b\u00eatement de le faire tomber avec un balayage",headbuttSuccess1:"%1 donne un magnifique coup de boule \u00e0 %2, qui pisse le sang !",headbuttSuccess2:"A\u00efe, a\u00efe, a\u00efe... %1 donne un coup de t\u00eate sur le nez %2",
headbuttSuccess3:"%1 donne un magnifique coup de boule \u00e0 %2, qui pisse le sang !",headbuttBallSuccess1:"%1 donne un magnifique coup de boule \u00e0 %2 qui l\u00e2che la balle sur le coup !",headbuttBallSuccess2:"%1 donne un magnifique coup de boule \u00e0 %2 qui l\u00e2che la balle sur le coup !",headbuttBallSuccess3:"%1 donne un magnifique coup de boule \u00e0 %2 qui l\u00e2che la balle sur le coup !",headbuttFailure1:"%1 tente de donner un coup de boule \u00e0 %2 mais il est esquiv\u00e9 sans difficult\u00e9",
headbuttFailure2:"%2 ne peut retenir un sourire alors que son adversaire essaie vainement de lui donner un coup de boule",headbuttFailure3:"%1 tente de donner un coup de boule \u00e0 %2 mais il est esquiv\u00e9 sans difficult\u00e9",highplaquageSuccess1:"%1 \u00e9x\u00e9cute un magnifique plaquage \u00e0 l'\u00e9paule sur %2, qui mange la poussi\u00e8re !",highplaquageSuccess2:"Ouch !! %1 plaque %2 \u00e0 l'\u00e9paule, \u00e7a doit faire mal !",highplaquageSuccess3:"%1 \u00e9x\u00e9cute un magnifique plaquage \u00e0 l'\u00e9paule sur %2, qui mange la poussi\u00e8re !",
highplaquageBallSuccess1:"%1 fait un plaquage \u00e0 l'\u00e9paule \u00e0 %2, la balle est \u00e0 terre !",highplaquageBallSuccess2:"%1 fait un plaquage \u00e0 l'\u00e9paule \u00e0 %2 qui l\u00e2che la balle sur le coup !",highplaquageBallSuccess3:"%1 fait un plaquage \u00e0 l'\u00e9paule \u00e0 %2 qui l\u00e2che la balle sur le coup !",highplaquageFailure1:"%1 tente un plaquage \u00e0 l'\u00e9paule sur %2 mais il est esquiv\u00e9 sans difficult\u00e9",highplaquageFailure2:"%2 a eu chaud, %1 a manqu\u00e9 son plaquage \u00e0 l'\u00e9paule !",
highplaquageFailure3:"%1 tente un plaquage \u00e0 l'\u00e9paule sur %2 mais il est esquiv\u00e9 sans difficult\u00e9",IsWounded1:"%1 se tord de douleur au sol : c'est un kill ! ",IsWounded2:"%1 est oblig\u00e9 de sortir sur la civi\u00e8re : c'est un kill ! ",IsWounded3:"%1 n'arrive pas \u00e0 se relever, il doit \u00eatre \u00e9vacu\u00e9 du terrain : c'est un kill ! ",IsDead1:"%1 s'effondre, mort, dans une mare de sang ! : C'est un kill !",IsDead2:"%1 pousse un dernier r\u00e2le : c'est un kill !",
IsDead3:"%1 n'a pas r\u00e9sist\u00e9 \u00e0 la violence du coup : c'est un kill !",IsSerious1:"%1 semble avoir du mal \u00e0 se remettre de ce coup-l\u00e0",IsSerious2:"%1 semble avoir du mal \u00e0 se remettre de ce coup-l\u00e0",IsSerious3:"%1 semble avoir du mal \u00e0 se remettre de ce coup-l\u00e0",IsAlmostDead1:"%1 est proche de la mort...",IsAlmostDead2:"%1 est proche de la mort...",IsAlmostDead3:"%1 est proche de la mort...",GrenadeStun1:"%1 fait appara\u00eetre une grenade dans sa main et la lance en %2... %3 joueur(s) se retrouve(nt) \u00e0 terre",
GrenadeStun2:"%1 fait appara\u00eetre une grenade dans sa main et la lance en %2... %3 joueur(s) se retrouve(nt) \u00e0 terre",GrenadeStun3:"%1 fait appara\u00eetre une grenade dans sa main et la lance en %2... %3 joueur(s) se retrouve(nt) \u00e0 terre",NoGrenade1:"%1 cherche une grenade aveuglante dans sa cavit\u00e9 subdermale pour la lancer en %2... mais il n'y a rien !",NoGrenade2:"%1 cherche une grenade aveuglante dans sa cavit\u00e9 subdermale pour la lancer en %2... mais il n'y a rien !",NoGrenade3:"%1 cherche une grenade aveuglante dans sa cavit\u00e9 subdermale pour la lancer en %2... mais il n'y a rien !",
Hooligans1:"Sur un signe de %1, des supporters de son \u00e9quipe lancent des fumig\u00eanes sur le terrain... on ne voit plus rien !",Hooligans2:"Sur un signe de %1, des supporters de son \u00e9quipe lancent des fumig\u00eanes sur le terrain... on ne voit plus rien !",Hooligans3:"Sur un signe de %1, des supporters de son \u00e9quipe lancent des fumig\u00eanes sur le terrain... on ne voit plus rien !",Bonus1:"%1 conserve la balle et marque un bonus !",Bonus2:"%1 marque un point pour ce bonus m\u00e9rit\u00e9",
Bonus3:"Et un point de plus gr\u00e2ce au bonus marqu\u00e9 par %1 !",PenaltyShotSuccess1:"%1 face \u00e0 %2... il marque son penalty !",PenaltyShotSuccess2:"%1 marque son penalty ! %2 se tape la t\u00eate contre le mur, il doit s'en vouloir",PenaltyShotSuccess3:"La tension monte, les 2 joueurs s'observent... %1 r\u00e9ussit \u00e0 tromper la vigilance de %2 et marque son penalty !",PenaltyShotFailure1:"%2 arr\u00eate facilement le tir de %1 !",PenaltyShotFailure2:"Avec grande difficult\u00e9, %2 arr\u00eate le boulet de cannon de %1 !",
PenaltyShotFailure3:"%1 face \u00e0 %2... mais il rate son tir !",PenaltyWin1:"C'est ainsi que ce termine ce match: %1 \u00e9taient plus efficace lors de cette sc\u00e9ance de tirs au but !",PenaltyWin2:"Et voila s'en est fini! %1 remporte la sc\u00e9ance de tirs au but !",PenaltyWin3:"Les joueurs de %1 se ruent en hurlant sur le terrain. C'est la victoire !",PenaltyDefaultWin1:"%1 remporte la sc\u00e9ance de tirs au but par d\u00e9faut !",PenaltyDefaultWin2:"%1 remporte la sc\u00e9ance de tirs au but par d\u00e9faut !",
PenaltyDefaultWin3:"%1 remporte la sc\u00e9ance de tirs au but par d\u00e9faut !"};var comments_en={ControlLife0:"%1 is too weak to play the game",ControlTransplant0:"%1 possesses illegal implant(s)",MoveToCase1:"%1 moves to square %2",MoveToCase2:"%1 hesitates, but finally decides to move to square %2",MoveToCase3:"%1 takes position in square %2",MoveToBallOwner1:"%1 moves toward the ball owner in %2, it will hurt!",MoveToBallOwner2:"%1 goes determinedly towards the ball owner in %2",MoveToBallOwner3:"%1 has seen the ball, he charges on towards the ball owner in %2",MoveToPlayer1:"%1 goes towards %2 in %3. It will hurt!",
MoveToPlayer2:"%1 looks daggers at %2 whilst moving to square %3",MoveToPlayer3:"No rest for %2, %1 targets him going to square %3",MoveToBall1:"%1 takes chance that the ball lays on the ground and moves toward the ball in %2",MoveToBall2:"It's a golden opportunity for %1 that rushes strait in %2, towards the ball on the ground",MoveToBall3:"%1 hurries up to %2 hoping to pick up the ball",BlockedMove1:"%1 is blocked.",BlockedMove2:"%1 tries vainly to move on but stands still on the square, blocked.",
BlockedMove3:"%1 is blocked by an adversary",DontKnowMove1:"%1 obviously doesn't know what to do and doesn't move",DontKnowMove2:"%1 is vainly waiting for an order from his coach and stays on the spot",DontKnowMove3:"%1 is left rooted on the spot",StandUp1:"%1 struggles to stand up",StandUp2:"%1 leaps up",StandUp3:"%1 rolls backward and stands up",Wait1:"%1 waits steadily",Wait2:"%1 keeps an eye on his opponents and waits moveless",Wait3:"%1 contemplates what the situation was now",DontKnowBall1:"%1 doesn't remember what to do with that metal thing in his hands !",
DontKnowBall2:"%1 hold uncertain the ball and stares at his team mates",DontKnowBall3:"%1 looks questioningly his coach holding the ball...",KeepBall1:"%1 keeps the ball awaiting for a better situation",KeepBall2:"%1 seems to know what he's doing keeping the ball",KeepBall3:"%1 juggles with the ball",TakeBall1:"%1 crouches and lifts the ball",TakeBall2:"%1 grabs the ball",TakeBall3:"Full steam ahead, %1 snatches the ball",PassPlayerSuccess1:"%1 accurately passes the ball to %2",PassPlayerSuccess2:"%1 passes the ball at %2. What a pass !",
PassPlayerSuccess3:"%1 has seen %2 and passes him the ball over",PassPlayerReceived1:"%1 hands the ball to %2 but %3 snatches it",PassPlayerReceived2:"%1 passes the ball to %2, but %3 is on the way and receive it.",PassPlayerReceived3:"But what the Hell did %1 do? %3 catches the ball while %2 was supposed to get it",PassPlayerFailure1:"%1 tries to pass to %2, but it missed : the ball rolls in %3",PassPlayerFailure2:" Where the Hell was %1 looking at ? Instead of throwing to %2, he miserably sends the ball in square %3 !",
PassPlayerFailure3:"%1 hand is trembling ! %2 can only look how the ball flies to %3",PassPlayerIntercepted1:"%1 tries to pass to %2, but %3 is in the way and intercept the ball !",PassPlayerIntercepted2:"%1 would like to pass the ball to %2, but %3 is lying in wait and snatch it !  ",PassPlayerIntercepted3:"Good instinctive reaction of %3 who intercepts the ball from %1 for attention of %2",PassSquareCatched1:"%1 throw the ball in square %2 and %3 catch it",PassSquareCatched2:"%1 splendidly passes in %2 and %3 grab the ball",
PassSquareCatched3:"%1 throw the ball in square %2 and %3 just has to stretch out his arms to grab it",PassSquareIntercepted1:"%1 throws the ball in square %2 but %3 intercept!",PassSquareIntercepted2:"But what the Hell %1 was thinking about tossing the ball in square %2 ? It was clear that %3 was ideally placed to rescue the ball !",PassSquareIntercepted3:"%1 throw the ball to square %2, but %3 hanging in the air like a bird, snatch it !",PassSquareSuccess1:"%1 has the ball, tosses it in %2 but nobody's there to catch it !",
PassSquareSuccess2:"%1 has done a good pass... A pity that no one stays in %2 to intercept the ball",PassSquareSuccess3:"%1 throw the ball... every player is watching the ball rolling to square %2 ",PassSquareFailure1:"%1 throw the ball to square %2 but the wind redirect it to %3 !",PassSquareFailure2:"Not only %1 doesn't find any team mate in square %3, but on top it seems he wanted to throw in square %2. He definitely have to improve his passes !",PassSquareFailure3:"%1 tosses the ball to square %2 which rolls like magnetized to %3 ! Is that black magic or technology ?",
ShootSuccess1:"%1 streches out his arm and shoot to score %2 points!",ShootSuccess2:"%1 strikes %2 points and scores an very nice goal !",ShootSuccess3:"Yeah Yeah, %1 hesitates, aims his shoot and GOOOOOOAAAALLL !!! %2 points greatly closing the quarter in favour of his team",ShootIntercepted1:"%1 shoots but %2 makes a first-in-class save !",ShootIntercepted2:" %1 shot was perfect, but %2 had his final word for now, reviving the game",ShootIntercepted3:"%1 shoots without strenth %2 catchs easily the ball",
ShootFailure1:"%1 shoots and watches how the ball poorly falls in square %2",ShootFailure2:"%1 misses the goal and the ball poorly falls down in square %2",ShootFailure3:"%1 is in a good position, but his shot's too weak. Sound echoes on the floor while the ball bounces to square %2",SmashSuccess1:"%1 leaps into the goal and smashes for %2 points !",SmashSuccess2:"%1 jumps into the air before slaming the ball in the goal, scoring %2 points",SmashSuccess3:"What is %1 doing ? He makes a flip flop and smashes the ball into the goal !",
SmashFailure1:"%1 tries hopeful to smash, but the ball hits the wall and falls into square %2",SmashFailure2:"%1 jumps for a smash a smile on his face, but forget to aim properly his shot. The ball falls in square %2",SmashFailure3:"What happens to %1 ? He bungled his smash and the ball bounces to square %2",plaquageSuccess1:"%1 tackles %2 who crashed against the ground",plaquageSuccess2:"Ouch, this tackle from %1 on %2 must be painful",plaquageSuccess3:"%2 howl with pain while getting tackled by %1",
plaquageBallSuccess1:"Very determined, %1 tackles %2 who falls down, the ball's laying besides him",plaquageBallSuccess2:"%1 throw %2 on the ground realizing a wonderful sack",plaquageBallSuccess3:"%1 will obviously watch again on Holovision his splendid sack against %2",plaquageFailure1:"%1 tries to tackle %2, who dodges easily",plaquageFailure2:"%1 fails to tackle %2 and collapses on the ground",plaquageFailure3:"%2 takes a step backwards while %1 falls head first towards his feet",hitSuccess1:"%1 strikes brutally %2, who spurts blood !",
hitSuccess2:"%1 punshes %2 in the face",hitSuccess3:"%1 tries to tear the lower jaw out from %2 !",hitBallSuccess1:"Nooo, %2 launches the ball while %1 strikes him so brutally that the stadium's still trembling",hitBallSuccess2:"What a furious strike from %1 ! %2 is knocked out for a second and launches the ball!!",hitBallSuccess3:"%1 hits twice as hard %2 who launches the ball",hitFailure1:"%1 punches %2 who dodges easily",hitFailure2:"%2 cannot keep smiling faintly while his opponent tries vainly to hit him",
hitFailure3:"What is %1 doing? Is he catching the files ? No ! He failed to strike %2 !!",sweepSuccess1:"%1 sweeps %2 who crashed on the ground as a piece of shit",sweepSuccess2:"The audience is growling after %1 swept %2... They want to see blood !",sweepSuccess3:"%2 must have dislocated a shoulder falling on the ground after %1 swept him",sweepBallSuccess1:"With this superb sweeping, %1 defeats %2 who loses the ball immediately",sweepBallSuccess2:"Why did %2 not try to dodge the sweeping from %1 ? Now he lays on the ground and has lost the ball",
sweepBallSuccess3:"He usualy use to tackle his opponent but %1 decided all of a sudden that sweeping would be more esthetic %2 falls down and loses the ball immediately",sweepFailure1:"%1 tries to sweep %2, who's obviously faster dodges easily",sweepFailure2:"%1 miserably miss his sweeping against %2 and stay simple-minded in fron of him",sweepFailure3:"%2 easily block %1 who foolishly tried to sweep him",headbuttSuccess1:"%1 headbutts brutaly %2, blood spurts !",headbuttSuccess2:"Ouch, ouch, ouch... %1 headbutts %2 nose",
headbuttSuccess3:"%1 splendidly headbutts %2, who spurts blood !",headbuttBallSuccess1:"%1 violently headbutts %2 who loses the ball immedialety !",headbuttBallSuccess2:"%1 brutally headbutts %2 who launches the ball immedialety !",headbuttBallSuccess3:"%1 headbutts %2 that cannot hold the ball any more !",headbuttFailure1:"%1 tries to headbutt %2 who dodges easily",headbuttFailure2:"%2 cannot keep smiling faintly while his opponent tries vainly to butthead him",headbuttFailure3:"%1 tries to butthead %2 who evades without difficulty",
highplaquageSuccess1:"Splendid ! %1 performs a shoulder-high tackle on %2, who bites the durt !",highplaquageSuccess2:"Ouch !! %1 high-tackles %2, That hurts !",highplaquageSuccess3:"%1 performs a splendid high tackle on %2, who bites the durt!",highplaquageBallSuccess1:"%1 high tackles %2, the ball falls down !",highplaquageBallSuccess2:"%1 high tackles %2 who immediately dropped the ball !",highplaquageBallSuccess3:"%1 high tackles %2 who immediately dropped the ball !",highplaquageFailure1:"%1 tries a high tackle on %2 who dodges without difficulty",
highplaquageFailure2:"%2 is lucky, %1 missed his high tackle try !",highplaquageFailure3:"%1 tries to high tackle %2 but he poorly missed his try",IsWounded1:"%1 writhes in pain : it's a kill !",IsWounded2:"%1 is evacuated on a stretcher : it's a kill!",IsWounded3:"%1 cannot stand up anymore and needs to be evacuated : it's a kill!",IsDead1:"%1 collapses dead in a pool of blood! It's a kill !",IsDead2:"%1 whispers a death rattle : It's a kill !",IsDead3:"%1 did not resist the blow : It's a kill !",
IsSerious1:"%1 seems to be seriously knocked-out",IsSerious2:"%1 seems to be seriously knocked-out",IsSerious3:"%1 seems to be seriously knocked-out",IsAlmostDead1:"%1 is almost dead...",IsAlmostDead2:"%1 is almost dead...",IsAlmostDead3:"%1 is almost dead...",GrenadeStun1:"%1 uncloaks a stun grenade in his hand and throws it in %2... %3 player(s) is (are) lying on the ground",GrenadeStun2:"% uncloaks a stun grenade in his hand and throws it in %2... %3 player(s) is (are) lying on the ground ",GrenadeStun3:"%1 uncloaks a stun grenade in his hand and throws it in %2... %3 player(s) is (are) lying on the ground",
NoGrenade1:"%1 is searching his subdermal cavity for a stun grenade to throw in %2... but he finds nothing !",NoGrenade2:"%1 is searching his subdermal cavity for a stun grenade to throw in %2... but he finds nothing !",NoGrenade3:"%1 is searching his subdermal cavity for a stun grenade to throw in %2... but he finds nothing !",Hooligans1:"At a hand signal of %1, his fans are throwing smoke bombs onto the field... you can't see a thing with this smoke!",Hooligans2:"At a hand signal of %1, his fans are throwing smoke bombs onto the field... you can't see a thing with this smoke!",
Hooligans3:"At a hand signal of %1, his fans are throwing smoke bombs onto the field... you can't see a thing with this smoke!",Bonus1:"%1 holds the ball and scores one bonus !",Bonus2:"%1 scores one well deserved bonus",Bonus3:"Et A new point thanks to the bonus scored by %1 !",PenaltyShotSuccess1:"%1 Facing %2... he missed the penalty!",PenaltyShotSuccess2:"%1 scored his penalty! %2 is very disappointed, he's kicking himself",PenaltyShotSuccess3:"They grow nervous, both players are watching each other... %1 eludes %2 and scored!",
PenaltyShotFailure1:"%2 stops easily %1's shoot !",PenaltyShotFailure2:" %2 hesitated for a moment but saved %1's cannonball !",PenaltyShotFailure3:"%1 is facing %2... but missed his kick!",PenaltyWin1:"That's how the game ends: %1 was the most efficient during the penalty shoot-out!",PenaltyWin2:"Now they have finished! %1 hold nerves to win the penalty shoot-out!",PenaltyWin3:"%1 players are victoriously invading the field!",PenaltyDefaultWin1:"%1 wins the penalty shoot-out by default!",PenaltyDefaultWin2:"%1 wins the penalty shoot-out by default!",
PenaltyDefaultWin3:"%1 wins the penalty shoot-out by default!"};var langs={en:{home:{name:"HOME"},away:{name:"AWAY"},stadium:{stadiumName:"stadium",interest:"Interest : ",spectators:" spectators"},buttons:{play:"Play",pause:"Pause",speed:"Speed : ",quarter:"Quarter : ",phase:"Phase : ",simultaneous:"Simultaneous Moves",grid:"Display Grid",quit:"Quit"},phrases:{phrasesLinks:{compTab:"Compositions"}},players:{transplants:" has transplants : ",notransplant:" has no transplant.",exclusion:" is excluded for ",BIOGILLS:"Branchiae",CERPROT1:"Brain Protection 1",CERPROT2:"Brain Protection 2",
HEATATOO:"Moving Tatoo",HELMSPIK:"Spiked Helmet",MEMCHIP1:"Memory Chip 1",BODTATOO:"Moving Tatoo",DERMARM0:"Dermal armor 0",DERMARM1:"Dermal armor 1",DERMARM2:"Dermal armor 2",DERMARM3:"Dermal armor 3",ARMPOCKT:"Subdermal Cavity",ARMSREN1:"Strengthened Arms 1",ARMTATOO:"Moving Tatoo",MUSCREN1:"Strengthened Muscles 1",NANOCHIR:"Nano-surgeons",TELESARM:"Telescopic Arm",HANDREN1:"Strengthened Hands 1",HANTATOO:"Moving Tatoo",MAGNHAND:"Magnetic Hand",STRIPPE2:"Retractile Blades",STRIPPER:"Retractile Blades 2",
LEGPROT1:"Leg Subdermal Protections 1",LEGPROT2:"Leg Subdermal Protections 2",LEGTATOO:"Moving Tatoo",FOOTATOO:"Moving Tatoo",FOOTSPIK:"Spiked Feet",CYBREFX1:"Wired Reflex 1",CYBREFX2:"Speeder Chip",LASEREYE:"Laser Eye"}},fr:{home:{name:"DOMICILE"},away:{name:"EXTERIEUR"},stadium:{stadiumName:"stade",interest:"Int\u00e9r\u00eat : ",spectators:" spectateurs"},buttons:{play:"Lecture",pause:"Pause",speed:"Vitesse : ",quarter:"Quart-temps : ",phase:"Phase : ",simultaneous:"Mouvements Simultan\u00e9s",
grid:"Afficher la Grille",quit:"Quitter"},phrases:{phrasesLinks:{compTab:"Compositions"}},players:{transplants:" poss\u00e8de les greffes : ",notransplant:" ne poss\u00e8de aucune greffe."}}};function Match(a){this.quarters=a.xmlgame.xmlquarter;this.stepMove=!0;this.stepActions=this.turns=null;this.isSimultaneousMoves=!0;this.initQuarter=function(b){this.qtId="QT"+game.quarter;initConsole(this.qtId);this.phase=0;updateQuarterLabel(game.quarter);updatePhaseLabel(this.qtId,0);this.isSimultaneousMoves=b;this.turns=this.quarters[game.quarter-1].xmlturn;var a=this.turns[0],b=a.xmlplayerposition;updateScore(a.awayscore,!0);updateScore(a.homescore);for(a=game.players.length-1;a>=0;a--)updatePlayerStatus(game.players[a]);
for(a=b.length-1;a>=0;a--){var c=b[a],e=game.getPlayerByJersey(c.jersey,c.home==="false");updatePlayerStatus(e,c);e.setSquare(c.position-1);c.ball==="true"&&(e.receiveBall(),game.ball.setPlayer(e))}};this.changeSimultaneousMove=function(){this.isSimultaneousMoves=this.isSimultaneousMoves?!1:!0};this.doStep=function(b){if(this.stepMove){if(!(this.phase>=this.turns.length))this.stepMove=!1,updateScore(this.turns[this.phase].awayscore,!0),updateScore(this.turns[this.phase].homescore),this.doTurn(this.turns[this.phase++],
this.turns[this.phase],b)}else{if(this.stepActions.length==1)this.stepMove=!0;this.doAction(this.stepActions.shift(),b)}};this.doTurn=function(b,a,c){updatePhaseLabel(this.qtId,b.number);this.doPositions(a,c);if(c)for(var b=b.xmlaction.slice(this.turnNbPlayers),a=b.length,e=0;e<a;e++)this.doAction(b[e],c);else{this.stepActions=b.xmlaction;if(this.isSimultaneousMoves)this.doMoves(this.stepActions),this.stepActions=this.stepActions.slice(this.turnNbPlayers);animate()}if(c||this.stepActions.length==
0)this.stepMove=!0};this.doPositions=function(a,d){if(a){var c=a.xmlplayerposition,e=c.length;this.turnNbPlayers=e;d&&a.ball&&(game.ball.player&&(game.ball.player.fall(),game.ball.drop()),game.ball.setSquare(a.ball-1));for(var f=0;f<e;f++){var g=c[f],h=game.getPlayerByJersey(g.jersey,g.home==="false");g.lifestatus==="wounded"&&this.turnNbPlayers--;g.lifestatus==="dead"&&this.turnNbPlayers--;d&&(h.setPosition(g.position-1),g.grounded==="true"?h.fall():h.standUp(),g.ball==="true"&&(h.receiveBall(),
game.ball.setPlayer(h)));updatePlayerStatus(h,g)}}};this.doMoves=function(a){for(var d=0;d<this.turnNbPlayers;d++){var c=a[d],e;for(e in c)if(e.indexOf("xml")!=-1)this[e](c)}};this.doAction=function(a,d){for(var c in a)if(c.indexOf("xml")!=-1)this[c](a,d);d||animate()};this.xmldontknowball=function(a){this.randomActionString("DontKnowBall",[game.getPlayerByJersey(a.actorjersey,a.actorhome==="false").name])};this.xmlpass=function(a,d){var c=a.xmlpass,e=game.getPlayerByJersey(a.actorjersey,a.actorhome===
"false"),f="Pass",g=[e.name];e.standUp();c.interceptorjersey?(c.type==="player"?(f+="Player",e=game.getPlayerByJersey(c.tojersey,c.tohome==="false"),g.push(e.name)):(f+="Square",g.push(c.to)),f+="Intercepted",e=game.getPlayerByJersey(c.interceptorjersey,c.interceptorhome==="false"),g.push(e.name),game.ball.move(e.square),actionCallback=function(){game.ball.setPlayer(e);e.receiveBall()},d&&actionCallback()):c.receiverjersey?(c.type==="player"?(f+=c.tojersey==c.receiverjersey?"PlayerSuccess":"PlayerReceived",
e=game.getPlayerByJersey(c.tojersey,c.tohome==="false"),g.push(e.name)):(f+="SquareCatched",g.push(c.to)),e=game.getPlayerByJersey(c.receiverjersey,c.receiverhome==="false"),g.push(e.name),game.ball.move(e.square),actionCallback=function(){game.ball.setPlayer(e);e.receiveBall()},d&&actionCallback()):(c.type==="square"?(f+=c.to===c.end?"SquareSuccess":"SquareFailure",g.push(c.to)):(f+="PlayerFailure",e=game.getPlayerByJersey(c.tojersey,c.tohome==="false"),g.push(e.name)),g.push(c.end),game.ball.move(c.end-
1),this.randomActionString(f,g))};this.xmlshoot=function(a,d){var c=a.xmlshoot,e="Shoot",f=game.getPlayerByJersey(a.actorjersey,a.actorhome==="false"),g=[f.name];f.standUp();c.success==="true"?(e+="Success",g.push(c.points),game.ball.move(a.actorhome==="true"^game.quarter%2?45:46),actionCallback=function(){updateScore(parseInt(c.points,10),a.actorhome==="false",!0)},d&&actionCallback()):c.interceptorjersey?(f=game.getPlayerByJersey(c.interceptorjersey,c.interceptorhome==="false"),game.ball.move(f.square),
e+="Intercepted",g.push(f.name),actionCallback=function(){game.ball.setPlayer(f);f.receiveBall()},d&&actionCallback()):(e+="Failure",g.push(c.end),game.ball.move(c.end-1));this.randomActionString(e,g)};this.xmlsmash=function(a,d){var c=a.xmlsmash,e="Smash",f=game.getPlayerByJersey(a.actorjersey,a.actorhome==="false"),g=[f.name];f.standUp();c.success==="true"?(e+="Success",g.push(c.points),game.ball.move(a.actorhome==="true"^game.quarter%2?45:46),actionCallback=function(){updateScore(parseInt(c.points,
10),a.actorhome==="false",!0)},d&&actionCallback()):(e+="Failure",g.push(c.end),game.ball.move(c.end-1));this.randomActionString(e,g)};this.xmlkeepball=function(a){this.randomActionString("KeepBall",[game.getPlayerByJersey(a.actorjersey,a.actorhome==="false").name])};this.xmltakeball=function(a){a=game.getPlayerByJersey(a.actorjersey,a.actorhome==="false");game.ball.setPlayer(a);a.receiveBall();this.randomActionString("TakeBall",[a.name])};this.xmlattack=function(a){var d=a.xmlattack,c=d.kind,e=game.getPlayerByJersey(a.actorjersey,
a.actorhome==="false"),f=[e.name];d.actorposition=="down"&&e.fall();e=game.getPlayerByJersey(d.victimjersey,d.victimhome==="false");f.push(e.name);d.victimposition=="down"&&e.fall();d.dropsball&&(game.ball.drop(),c+="Ball");c+=d.success=="true"?"Success":"Failure";this.randomActionString(c,f);d.killpoints&&updateScore(d.killpoints,a.actorhome==="false",!0);d.victimstatus&&this.randomActionString("Is"+this.capitaliseFirstLetter(d.victimstatus),[e.name])};this.xmllaunchgrenade=function(a){var d=a.xmllaunchgrenade,
c;if(d.kind==="Stun")if(d.victimhasball==="true"&&game.ball.drop(),d.xmlvictim.length){for(var e=d.xmlvictim,f=e.length-1;f>=0;f--)c=e[f],c=game.getPlayerByJersey(c.jersey,c.home==="false"),c.fall();c=game.getPlayerByJersey(a.actorjersey,a.actorhome==="false");this.randomActionString("GrenadeStun",[c.name,d.to,d.xmlvictim.length])}else if(d.xmlvictim)c=d.xmlvictim,c=game.getPlayerByJersey(c.jersey,c.home==="false"),c.fall(),c=game.getPlayerByJersey(a.actorjersey,a.actorhome==="false"),this.randomActionString("GrenadeStun",
[c.name,d.to,1])};this.xmlnogrenade=function(a){this.randomActionString("NoGrenade",[game.getPlayerByJersey(a.actorjersey,a.actorhome==="false").name])};this.xmlbonus=function(a){updateScore(1,a.actorhome==="false",!0);this.randomActionString("Bonus",[game.getPlayerByJersey(a.actorjersey,a.actorhome==="false").name])};this.xmlhooligans=function(a){this.randomActionString("Hooligans",[game.getPlayerByJersey(a.actorjersey,a.actorhome==="false").name])};this.xmlmove=function(a){game.getPlayerByJersey(a.actorjersey,
a.actorhome==="false").move(a.xmlmove.to-1)};this.xmlblockedmove=function(a){this.randomActionString("BlockedMove",[game.getPlayerByJersey(a.actorjersey,a.actorhome==="false").name])};this.xmldontknowmove=function(a){this.randomActionString("DontKnowMove",[game.getPlayerByJersey(a.actorjersey,a.actorhome==="false").name])};this.xmlstandup=function(a){a=game.getPlayerByJersey(a.actorjersey,a.actorhome==="false");a.standUp();this.randomActionString("StandUp",[a.name])};this.xmlwait=function(a){this.randomActionString("Wait",
[game.getPlayerByJersey(a.actorjersey,a.actorhome==="false").name])};this.capitaliseFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.substring(1)};this.randomActionString=function(a,d){updateConsole(this.qtId,this.replaceActionString(a+((new Date).getTime()%3+1),d))};this.replaceActionString=function(a,d){for(var a=comments[a],c=0;c<d.length;c++)a=a.replace("%"+(c+1),d[c]);a+="\n";return convertXMLToStr(a)}};var CONST={player:{object:"player",fallen:"fallen",standing:"standing",withBall:"standball"},ball:{object:"ball"},coords:{rows:[45,105,164,222,280],cols:[30,90,150,208,266,324,382,440,499],squares:[{x:45,y:30},{x:45,y:90},{x:45,y:150},{x:45,y:208},{x:45,y:266},{x:45,y:324},{x:45,y:382},{x:45,y:440},{x:45,y:499},{x:105,y:30},{x:105,y:90},{x:105,y:150},{x:105,y:208},{x:105,y:266},{x:105,y:324},{x:105,y:382},{x:105,y:440},{x:105,y:499},{x:164,y:30},{x:164,y:90},{x:164,y:150},{x:164,y:208},{x:164,y:266},
{x:164,y:324},{x:164,y:382},{x:164,y:440},{x:164,y:499},{x:222,y:30},{x:222,y:90},{x:222,y:150},{x:222,y:208},{x:222,y:266},{x:222,y:324},{x:222,y:382},{x:222,y:440},{x:222,y:499},{x:280,y:30},{x:280,y:90},{x:280,y:150},{x:280,y:208},{x:280,y:266},{x:280,y:324},{x:280,y:382},{x:280,y:440},{x:280,y:499},{x:164,y:-20},{x:164,y:549}],modif:[[{x:21,y:1},{x:1,y:1},{x:41,y:1},{x:11,y:13},{x:31,y:13}],[{x:21,y:39},{x:1,y:39},{x:41,y:39},{x:11,y:27},{x:31,y:27}]]}};var TeamSquare={homeSquares:{},awaySquares:{},pushPlayer:function(a,b){var d=a.isAway?this.awaySquares:this.homeSquares;if(d[b]){if(!d[b][0])return d[b][0]=a,0;if(!d[b][1])return d[b][1]=a,1;if(!d[b][2])return d[b][2]=a,2;if(!d[b][3])return d[b][3]=a,3;if(!d[b][4])return d[b][4]=a,4}else return d[b]={0:a},0},popPlayer:function(a){var b=a.square,d=a.isAway?this.awaySquares:this.homeSquares;if(d[b]){for(var c in d[b])a==d[b][c]&&delete d[b][c];for(c in d[b])return;delete d[b]}},init:function(){this.awaySquares=
{};this.homeSquares={}}};function DrawObj(a){if(!isNaN(a))this.square=a,this.x=CONST.coords.squares[this.square].x,this.y=CONST.coords.squares[this.square].y,this.destSquare=a,this.destX=this.x,this.destY=this.y,this.pasY=this.pasX=0}DrawObj.prototype={};DrawObj.prototype.setSquare=function(a){if(!isNaN(a))this.square=a,this.x=CONST.coords.squares[this.square].x,this.y=CONST.coords.squares[this.square].y,this.destSquare=this.square,this.destX=this.x,this.destY=this.y,this.pasY=this.pasX=0};
DrawObj.prototype.init=function(){this.destY=this.destX=this.destSquare=this.y=this.x=this.square=null;this.pasY=this.pasX=0};DrawObj.prototype.setDest=function(a){this.destSquare=a;this.destX=CONST.coords.squares[a].x;this.destY=CONST.coords.squares[a].y;var a=this.destX-this.x,b=this.destY-this.y,d=Math.max(Math.abs(a),Math.abs(b));this.pasX=a/d;this.pasY=b/d};
DrawObj.prototype.isDone=function(){return this.square==null?!0:this.destX==Math.round(this.x)&&this.destY==Math.round(this.y)?(this.square=this.destSquare,this.x=Math.round(this.x),this.y=Math.round(this.y),this.pasY=this.pasX=0,!0):!1};function Player(a){DrawObj.call(this,a.square);this.isAway=a.isAway?!0:!1;this.jersey=a.jersey;this.jerseyNumber=isNaN(parseInt(a.jerseynumber,10))?a.jersey:a.jerseynumber;this.status=a.status?a.status:CONST.player.standing;this.position=0;this.code=a.code;this.name=a.name}Player.prototype=new DrawObj;Player.prototype.object=CONST.player.object;Player.prototype.init=function(){this.status=CONST.player.standing;this.position=0;DrawObj.prototype.init.call(this)};
Player.prototype.draw=function(a){if(this.square!=null){this.x+=this.pasX;this.y+=this.pasY;var b;switch(this.status){case CONST.player.withBall:b=CONST.player.withBall;break;case CONST.player.fallen:b=CONST.player.fallen;break;default:b=CONST.player.standing}this.isAway&&(b+="Away");b=window[b];var d=this.isAway?game.quarter%2:(1+game.quarter)%2,c=Math.round(this.x)+CONST.coords.modif[d][this.position].x,d=Math.round(this.y)+CONST.coords.modif[d][this.position].y;a.drawImage(b,d,c);a.fillText(this.jerseyNumber,
d+15,c+15)}};Player.prototype.move=function(a){TeamSquare.popPlayer(this);this.position=TeamSquare.pushPlayer(this,a);this.setDest(a)};Player.prototype.fall=function(){this.status=CONST.player.fallen};Player.prototype.standUp=function(){this.status=CONST.player.standing};Player.prototype.receiveBall=function(){this.status=CONST.player.withBall};Player.prototype.setSquare=function(a){if(!isNaN(a))this.position=TeamSquare.pushPlayer(this,a),DrawObj.prototype.setSquare.apply(this,[a])};
Player.prototype.setPosition=function(a){TeamSquare.popPlayer(this);this.setSquare(a)};function Ball(){DrawObj.call(this,18);this.player=null}Ball.prototype=new DrawObj;Ball.prototype.object=CONST.ball.object;Ball.prototype.draw=function(a){this.square!=null&&!this.player&&(this.x+=this.pasX?this.pasX:0,this.y+=this.pasY?this.pasY:0,a.drawImage(window.ball,Math.round(this.y)+20,Math.round(this.x)+20))};Ball.prototype.isDone=function(){return this.player?!0:DrawObj.prototype.isDone.call(this,null)};Ball.prototype.setPlayer=function(a){this.player=a};
Ball.prototype.drop=function(){this.setSquare(this.player.square);this.player=!1};Ball.prototype.move=function(a){this.setSquare(this.player.square);this.player=!1;this.setDest(a)};function Game(a){this.canvas=a;this.canvas.fillStyle="white";this.canvas.font="bold 12px sans-serif";this.speed=6;this.pivot=8;this.quarter=1;this.ball=new Ball}Game.prototype={};Game.prototype.setCompositions=function(a){this.players=a};Game.prototype.initQuarter=function(a){this.quarter=a;TeamSquare.init();this.canvas.clearRect(0,0,594,392);for(a=this.players.length-1;a>=0;a--)this.players[a].init();this.ball.init()};
Game.prototype.draw=function(){this.canvas.clearRect(0,0,594,392);for(var a=this.players.length-1;a>=0;a--)this.players[a].draw(this.canvas);this.ball.draw(this.canvas)};Game.prototype.isDone=function(){for(var a=this.ball.isDone(),b=this.players.length-1;b>=0;b--)a=this.players[b].isDone()&&a;return a};Game.prototype.setPivot=function(a){this.pivot=a};
Game.prototype.getPlayerByJersey=function(a,b){for(var d=b?this.players.length:this.pivot,c=b?this.pivot:0;c<d;c++)if(a==this.players[c].jersey)return this.players[c];return null};var field=new Image,standing=new Image,standball=new Image,fallen=new Image,standingAway=new Image,standballAway=new Image,fallenAway=new Image,ball=new Image,xCoord=[0],yCoord=[0],pause=!0,actionCallback=null;commments=lang=null;function drawMe(a,b){game.drawObject(a,b)}
function setGameDatas(a){a.xmlgame||(a=xml2json.parser(a,""));match=new Match(a);a=a.xmlgame;document.querySelector("#date").innerHTML=a.competitioncode+" : "+a.season+"-"+a.competitionturn;document.querySelector("#stadiumName").innerHTML=a.stadium;document.querySelector("#audience").innerHTML=a.audience+lang.stadium.spectators;document.querySelector("#interest").innerHTML=lang.stadium.iterest+a.interest;if(a.challengeamnt>0)document.querySelector("#challenge").innerHTML=a.challengeamnt+" \ufffd";
a=a.xmlcomposition;document.querySelector("#home .name").innerHTML=a[0].fullname;document.querySelector("#home").style.backgroundColor="#"+a[0].color;document.querySelector("#home").style.color="#"+((parseInt(a[0].color,16)+8947848)%16777215).toString(16);document.querySelector("#away .name").innerHTML=a[1].fullname;document.querySelector("#away").style.backgroundColor="#"+a[1].color;document.querySelector("#away").style.color="#"+((parseInt(a[1].color,16)+8947848)%16777215).toString(16);var b=[],
d=Math.max(a[0].xmlgameplayer.length,a[1].xmlgameplayer.length);game.setPivot(a[0].xmlgameplayer.length);for(var c=0;c<d;c++){var e=a[0].xmlgameplayer[c],f=a[1].xmlgameplayer[c];e&&(b.unshift(new Player(e)),document.querySelector("#homeTeam").appendChild(createPlayerDiv(e)));if(f)f.isAway=!0,b.push(new Player(f)),document.querySelector("#awayTeam").appendChild(createPlayerDiv(f))}game.setCompositions(b);standing.src=["http://ultraball.ludimail.net/en/graphics/gameplayerIcon?color=",a[0].color,"&standing=1&ball=0"].join("");
standball.src=["http://ultraball.ludimail.net/en/graphics/gameplayerIcon?color=",a[0].color,"&standing=1&ball=1"].join("");fallen.src=["http://ultraball.ludimail.net/en/graphics/gameplayerIcon?color=",a[0].color,"&standing=0&ball=0"].join("");standingAway.src=["http://ultraball.ludimail.net/en/graphics/gameplayerIcon?color=",a[1].color,"&standing=1&ball=0"].join("");standballAway.src=["http://ultraball.ludimail.net/en/graphics/gameplayerIcon?color=",a[1].color,"&standing=1&ball=1"].join("");fallenAway.src=
["http://ultraball.ludimail.net/en/graphics/gameplayerIcon?color=",a[1].color,"&standing=0&ball=0"].join("")}
function createPlayerDiv(a){var b=document.createElement("div");b.className="player";b.id="p"+a.code+"_"+a.jersey;var d=document.createElement("div");d.innerHTML=a.name;var c=document.createElement("div");c.className="number";c.innerHTML=isNaN(parseInt(a.jerseynumber,10))?a.jersey:a.jerseynumber;var e=document.createElement("div");e.className="bars";var f=document.createElement("div");f.className="bar life";var g=document.createElement("div");g.className="bar form";var h=document.createElement("div");
h.className="lifeFiller";var i=document.createElement("div");i.className="formFiller";f.appendChild(h);g.appendChild(i);e.appendChild(f);e.appendChild(g);if(a.xmlplayertransplant){f=[convertXMLToStr(a.name),lang.players.transplants];g=a.xmlplayertransplant;if(g.code)f.push(lang.players[g.code]);else for(h=g.length;h>0;h--)f.push(lang.players[g[h-1].code],h>1?", ":"");f.push("\n");updateConsole("compPhrases",f.join(""))}else updateConsole("compPhrases",[convertXMLToStr(a.name),lang.players.notransplants,
"\n"].join(""));b.appendChild(d);d=document.createElement("div");a.control!=="normal"?(updateConsole("compPhrases",[convertXMLToStr(a.name),lang.players.exclusion,a.control,"\n"].join("")),d.className="redCard"):d.className="initiative";b.appendChild(d);b.appendChild(e);b.appendChild(c);return b}function convertXMLToStr(a){return a.replace(/&quot;/g,'"').replace(/&apos;/g,"'")}
function displayGrid(a){a.checked?document.getElementById("numgrid").className="":document.getElementById("numgrid").className="hidden"}function updateIsSimultaneousMoves(){match.changeSimultaneousMove()}
function init(){lang=location.pathname.split("/")[1];comments=window["comments_"+lang]||window.comments_en;lang=langs[lang]||langs.en;Transparency.render(document.getElementsByTagName("body")[0],lang);var a=document.getElementById("matchLoader");a.addEventListener?a.addEventListener("change",loadMatch,!1):a.attachEvent("onchange",loadMatch);field.src="img/field.jpg";ball.src="img/ball.png";try{game=new Game(document.getElementById("ub").getContext("2d")),updateSpeed(0)}catch(b){console.error(b.msg)}}
function play(){pause||setTimeout(function(){match.doStep()},1500-200*game.speed)}function playPause(){pause=!pause;document.getElementById("playpause").value=pause?lang.buttons.play:lang.buttons.pause;play()}function fonctionAuHasard(a){console.log(a)}function initPlayPause(){pause=!0;document.getElementById("playpause").value=lang.buttons.play}
function updateQuarter(a){initPlayPause();game.initQuarter(game.quarter+a);a&&(game.quarter==1?document.getElementById("previousQuarter").setAttribute("disabled",!0):document.getElementById("previousQuarter").removeAttribute("disabled"),game.quarter==4?document.getElementById("nextQuarter").setAttribute("disabled",!0):document.getElementById("nextQuarter").removeAttribute("disabled"));match.initQuarter(document.getElementById("isSimultaneousMoves").checked);game.draw()}
function updatePhase(a){match.phase+=a;match.doStep(!0);game.draw()}function updateSpeed(a){game.speed+=a;document.getElementById("speed").innerHTML=game.speed+"/7";game.speed==0?document.getElementById("slower").setAttribute("disabled",!0):document.getElementById("slower").removeAttribute("disabled");game.speed==7?document.getElementById("faster").setAttribute("disabled",!0):document.getElementById("faster").removeAttribute("disabled")}
function updateScore(a,b,d){b=b?document.querySelector("#away .score"):document.querySelector("#home .score");d&&(a+=parseInt(b.innerHTML,10));b.innerHTML=a}
function updatePlayerStatus(a,b){var d=document.querySelector(["#p",a.code," .initiative"].join(""));if(b){var c=b.lifestatus;if(d)c==="wounded"||c==="dead"?(document.createElement("div"),d.className=c,d.innerHTML="",document.getElementById("p"+a.code+"_"+a.jersey).appendChild(d)):d.innerHTML=b.initiative;document.querySelector("#p"+a.code+"_"+a.jersey+" .lifeFiller").style.width=b.lifepercent+"px";document.querySelector("#p"+a.code+"_"+a.jersey+" .formFiller").style.width=b.shapepercent+"px";document.getElementById("p"+
a.code+"_"+a.jersey).className="player"}else{if(d)d.innerHTML="";document.getElementById("p"+a.code+"_"+a.jersey).className="player substitute"}}function updateQuarterLabel(a){document.getElementById("quarter").innerHTML=a}
function updatePhaseLabel(a,b){match.phase<=1?document.getElementById("previousPhase").setAttribute("disabled",!0):document.getElementById("previousPhase").removeAttribute("disabled");(document.getElementById("phase").innerHTML=b)&&updateConsole(a,["____________________________________\nPhase ",b,"\n\n"].join(""))}function updateConsole(a,b){var d=document.getElementById(a);d.value+=b;d.scrollTop=d.scrollHeight}
function initConsole(a){var b=document.getElementById(a);if(!b){var d=document.createElement("div");d.innerHTML=a;d.onclick=function(){selectConsole(a)};b=document.createElement("textarea");b.disabled="disabled";b.rows=20;b.cols=100;b.id=a;document.getElementById("phrasesLinks").appendChild(d);document.getElementById("phrasesLinks").appendChild(document.createElement("br"));document.getElementById("phrases").appendChild(b)}selectConsole(a);b.value="";b.scrollTop=0}
function selectConsole(a){for(var b=document.querySelectorAll("#phrases textarea"),d=b.length-1;d>=0;d--)b[d].style.display="none";document.getElementById(a).style.display=""}function animate(){game.isDone()?(game.draw(),actionCallback&&(actionCallback.apply(),actionCallback=null),play()):(game.draw(),requestAnimFrame(animate,game.canvas))}function showLoader(){document.getElementById("loader").style.display="block"}
function hideLoader(){document.getElementById("loader").style.display="none";updateQuarter(0)}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();
