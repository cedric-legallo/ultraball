xml2json={parser:function(a,b,f){b||(b="");a=a.replace(/\s*\/>/g,"/>");a=a.replace(/<\?[^>]*>/g,"").replace(/<\![^>]*>/g,"");b.sort||(b=b.split(","));for(var a=this.no_fast_endings(a),a=this.attris_to_tags(a),a=escape(a),a=a.split("%3C").join("<").split("%3E").join(">").split("%3D").join("=").split("%22").join('"'),c=0;c<b.length;c++)a=a.replace(RegExp("<"+b[c]+">","g"),"*$**"+b[c]+"**$*"),a=a.replace(RegExp("</"+b[c]+">","g"),"*$***"+b[c]+"**$*");this.xmlobject={};b=this.xml_to_object("<JSONTAGWRAPPER>"+
a+"</JSONTAGWRAPPER>").jsontagwrapper;f&&(b=this.show_json_structure(b,f));return b},xml_to_object:function(a){for(var b=a.replace(/<\//g,"\ufffd"),b=b.split("<"),a=[],f=0,c=[],d=1;d<b.length;d++){var e=b[d].split(">")[0];c.push(e);f++;for(a.push(f+"<"+b[d].split("\ufffd")[0]);b[d].indexOf("\ufffd"+c[c.length-1]+">")>=0;)f--,c.pop()}for(var g=-1,b="this.xmlobject",d=0;d<a.length;d++){var f="",c=a[d].split("<")[0],i=a[d].split("<")[1].split(">")[0],i=i.toLowerCase(),e=a[d].split(">")[1];if(c<=g)for(var g=
g-c+1,h=0;h<g;h++)b=b.substring(0,b.lastIndexOf("."));b+="."+i;g=b.substring(0,b.lastIndexOf("."));eval("typeof "+g)!="object"&&(f+=g+"={value:"+g+"};\n");h=b.substring(b.lastIndexOf(".")+1);i=!1;for(k in eval(g))k==h&&(i=!0);g=!0;for(h=0;h<e.length;h+=3)e.charAt(h)!="%"&&(g=!1);e!=""&&!g?e/1!=e&&(e="'"+e.replace(/\'/g,"\\'")+"'",e=e.replace(/\*\$\*\*\*/g,"</"),e=e.replace(/\*\$\*\*/g,"<"),e=e.replace(/\*\*\$\*/g,">")):e="{}";e.charAt(0)=="'"&&(e="unescape("+e+")");i&&!eval(b+".sort")&&(f+=b+"=["+
b+"];\n");g="=";after="";i&&(g=".push(",after=")");eval(f+b+g+e+after);eval(b+".sort")&&(b+="["+eval(b+".length-1")+"]");g=c}return this.xmlobject},show_json_structure:function(a,b,f){var c="";c+=a.sort?"[\n":"{\n";for(var d in a)a.sort||(c+=d+":"),c+=typeof a[d]=="object"?this.show_json_structure(a[d],!1,1):typeof a[d]=="function"?a[d]+"":typeof a[d]!="string"?a[d]+",\n":"'"+a[d].replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")+"',\n";c+=a.sort?"],\n":"},\n";if(!f){c=
c.substring(0,c.lastIndexOf(","));c=c.replace(RegExp(",\n}","g"),"\n}");c=c.replace(RegExp(",\n]","g"),"\n]");a=c.split("\n");c="";for(d=f=0;d<a.length;d++){(a[d].indexOf("}")>=0||a[d].indexOf("]")>=0)&&f--;tabs="";for(var e=0;e<f;e++)tabs+="\t";c+=tabs+a[d]+"\n";(a[d].indexOf("{")>=0||a[d].indexOf("[")>=0)&&f++}b=="html"&&(c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;"),c=c.replace(/\n/g,"<BR>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"));b=="compact"&&(c=c.replace(/\n/g,"").replace(/\t/g,""))}return c},
no_fast_endings:function(a){for(var a=a.split("/>"),b=1;b<a.length;b++){var f=a[b-1].substring(a[b-1].lastIndexOf("<")+1).split(" ")[0];a[b]="></"+f+">"+a[b]}return a=a.join("")},attris_to_tags:function(a){for(var b=" =\"'".split(""),a=a.split(">"),f=0;f<a.length;f++){for(var c=a[f].split("<"),d=0;d<4;d++)c[0]=c[0].replace(RegExp(b[d],"g"),"_jsonconvtemp"+d+"_");if(c[1]){c[1]=c[1].replace(/'/g,'"');c[1]=c[1].split('"');for(var e=1;e<c[1].length;e+=2)for(d=0;d<4;d++)c[1][e]=c[1][e].replace(RegExp(b[d],
"g"),"_jsonconvtemp"+d+"_");c[1]=c[1].join('"')}a[f]=c.join("<")}a=a.join(">");a=a.replace(/ ([^=]*)=([^ |>]*)/g,"><$1>$2</$1");a=a.replace(/>"/g,">").replace(/"</g,"<");for(d=0;d<4;d++)a=a.replace(RegExp("_jsonconvtemp"+d+"_","g"),b[d]);return a}};if(!Array.prototype.push)Array.prototype.push=function(a){this[this.length]=a;return!0};if(!Array.prototype.pop)Array.prototype.pop=function(){var a=this[this.length-1];this.length--;return a};
